import{u as d,d as u,c as p,w as t,v as n,a as s,e as c,f,o as w,g as _,s as v}from"./index-IOeMYE9e.js";const b=s("h2",{class:"formControls_txt"},"註冊帳號",-1),g=s("label",{class:"formControls_label",for:"email"},"Email",-1),h=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),C=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1),k=s("label",{class:"formControls_label",for:"pwd2"},"再次輸入密碼",-1),y=s("input",{class:"formControls_btnSubmit",type:"submit",value:"註冊帳號"},null,-1),U={__name:"RegisterForm",setup(x){const r=d(),e=u({email:"",nickname:"",password:"",password_confirm:""}),i=async()=>{await v({email:e.value.email,password:e.value.password}).then(a=>{a.data.status&&(localStorage.setItem("token",JSON.stringify({value:a.data.token,expiry:a.data.exp})),localStorage.setItem("name",a.data.nickname),r.push({name:"todo"}))}).catch(a=>{console.log(a)})},m=async()=>{if(e.value.password!==e.value.password_confirm)return alert("密碼不一致請重新輸入"),!1;await _({email:e.value.email,password:e.value.password,nickname:e.value.nickname}).then(async a=>{a.data.status?(alert("註冊成功"),i()):alert(a.data.message)}).catch(a=>{alert(a.response.data.message)})};return(a,l)=>(w(),p("form",{class:"formControls",onSubmit:f(m,["prevent"])},[b,g,t(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":l[0]||(l[0]=o=>e.value.email=o)},null,512),[[n,e.value.email]]),h,t(s("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":l[1]||(l[1]=o=>e.value.nickname=o)},null,512),[[n,e.value.nickname]]),C,t(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",minlength:"6",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":l[2]||(l[2]=o=>e.value.password=o)},null,512),[[n,e.value.password]]),k,t(s("input",{class:"formControls_input",type:"password",name:"pwd2",id:"pwd2",minlength:"6",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":l[3]||(l[3]=o=>e.value.password_confirm=o)},null,512),[[n,e.value.password_confirm]]),y,s("a",{class:"formControls_btnLink",onClick:l[4]||(l[4]=o=>c(r).push({name:"login"}))},"登入")],32))}};export{U as default};
