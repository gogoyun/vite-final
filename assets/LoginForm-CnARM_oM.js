import{u as m,d as r,c as p,w as i,v as u,a,e as c,f,o as v,s as _}from"./index-L1cVEhFY.js";const w=a("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),b=a("label",{class:"formControls_label",for:"email"},"Email",-1),h=a("label",{class:"formControls_label",for:"pwd"},"密碼",-1),g=["value","disabled"],x={__name:"LoginForm",setup(C){const n=m(),s=r({email:"",password:""}),l=r(!1),d=async()=>{l.value=!0,await _({email:s.value.email,password:s.value.password}).then(e=>{e.data.status&&(localStorage.setItem("token",JSON.stringify({value:e.data.token,expiry:e.data.exp})),localStorage.setItem("name",e.data.nickname),l.value=!1,n.push({name:"todo"}))}).catch(e=>{alert(e.response.data.message),l.value=!1})};return(e,t)=>(v(),p("form",{class:"formControls",onSubmit:f(d,["prevent"])},[w,b,i(a("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.email=o)},null,512),[[u,s.value.email]]),h,i(a("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",minlength:"6",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.password=o)},null,512),[[u,s.value.password]]),a("input",{class:"formControls_btnSubmit",type:"submit",value:l.value?"登入中":"登入",disabled:l.value},null,8,g),a("a",{class:"formControls_btnLink",onClick:t[2]||(t[2]=o=>c(n).push({name:"register"}))},"註冊帳號")],32))}};export{x as default};
