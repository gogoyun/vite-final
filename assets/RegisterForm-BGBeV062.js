import{u as p,d as u,c,w as n,v as r,a as l,e as f,f as v,o as w,g as _,s as b}from"./index-L1cVEhFY.js";const g=l("h2",{class:"formControls_txt"},"註冊帳號",-1),h=l("label",{class:"formControls_label",for:"email"},"Email",-1),C=l("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),k=l("label",{class:"formControls_label",for:"pwd"},"密碼",-1),y=l("label",{class:"formControls_label",for:"pwd2"},"再次輸入密碼",-1),x=["value","disabled"],V={__name:"RegisterForm",setup(S){const i=p(),e=u({email:"",nickname:"",password:"",password_confirm:""}),o=u(!1),d=async()=>{await b({email:e.value.email,password:e.value.password}).then(a=>{a.data.status&&(localStorage.setItem("token",JSON.stringify({value:a.data.token,expiry:a.data.exp})),localStorage.setItem("name",a.data.nickname),o.value=!1,i.push({name:"todo"}))}).catch(a=>{o.value=!1,console.log(a)})},m=async()=>{if(o.value=!0,e.value.password!==e.value.password_confirm)return alert("密碼不一致請重新輸入"),o.value=!1,!1;await _({email:e.value.email,password:e.value.password,nickname:e.value.nickname}).then(async a=>{a.data.status?(alert("註冊成功"),d()):(o.value=!1,alert(a.data.message))}).catch(a=>{o.value=!1,alert(a.response.data.message)})};return(a,s)=>(w(),c("form",{class:"formControls",onSubmit:v(m,["prevent"])},[g,h,n(l("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>e.value.email=t)},null,512),[[r,e.value.email]]),C,n(l("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":s[1]||(s[1]=t=>e.value.nickname=t)},null,512),[[r,e.value.nickname]]),k,n(l("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",minlength:"6",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":s[2]||(s[2]=t=>e.value.password=t)},null,512),[[r,e.value.password]]),y,n(l("input",{class:"formControls_input",type:"password",name:"pwd2",id:"pwd2",minlength:"6",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":s[3]||(s[3]=t=>e.value.password_confirm=t)},null,512),[[r,e.value.password_confirm]]),l("input",{class:"formControls_btnSubmit",type:"submit",value:o.value?"資料建立中":"註冊帳號",disabled:o.value},null,8,x),l("a",{class:"formControls_btnLink",onClick:s[4]||(s[4]=t=>f(i).push({name:"login"}))},"登入")],32))}};export{V as default};
